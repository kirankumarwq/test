# UI/UX Flow & AI Integration Mockups

This document outlines the suggested user interface and experience flows for the AI-assisted medical appointment booking platform.

---

## 1. Patient Journey

### 1.1. Onboarding & Authentication
-   **Page: Landing Page**
    -   **UI:** Clean, professional design with a prominent call-to-action (CTA): "Find Your Doctor".
    -   **AI Feature:** A search bar with the prompt: **"Describe your symptoms or search for a specialty (e.g., 'sore throat and fever' or 'Cardiologist')."** This is the entry point for the **Symptom-to-Doctor Triage**.
-   **Page: Sign Up / Login**
    -   **UI:** Simple form for email/password signup. Include options for "Magic Link" login.
    -   **Flow:** After signup, the user's `auth.users` entry is created. A trigger populates a `public.profiles` table with `role` set to `patient`.

### 1.2. Finding a Doctor
-   **Page: Search Results**
    -   **Flow (AI-Powered):**
        1.  Patient enters "sore throat and fever" on the landing page.
        2.  The input is sent to our Next.js API route (`/api/ai/symptom-triage`).
        3.  The API route calls Google Gemini with a prompt like: `Given the symptoms "${symptoms}", recommend the top 3 medical specialties. Respond with a JSON array, e.g., ["Otolaryngologist", "General Practitioner"]`.
        4.  The page displays results for the recommended specialties, with a message: "Based on your symptoms, we recommend these specialists."
    -   **Flow (Traditional):** Patient selects "Cardiologist" from a dropdown or types it in. The page shows a list of cardiologists.
    -   **UI:** Display doctors in card format. Each card shows: Photo, Name, Specialty, Years of Experience, and Next Available Slot.

### 1.3. Booking an Appointment
-   **Page: Doctor's Profile & Booking**
    -   **UI:** Detailed doctor profile. A calendar view shows the doctor's availability (fetched from the `availability` table).
    -   **Flow:**
        1.  Patient selects a date and time slot.
        2.  A modal pops up: "Book Appointment with Dr. Smith".
        3.  **AI Feature:** A textarea prompts: **"Briefly describe your reason for the visit. This will be summarized for the doctor."**
        4.  Patient types their concerns (e.g., "I've had a persistent cough for 3 weeks, sometimes with wheezing. It gets worse at night.").
        5.  On clicking "Continue", the text is sent to `/api/ai/generate-summary`. Gemini returns a concise summary: `Patient reports a 3-week persistent cough with nocturnal exacerbation and occasional wheezing.`
        6.  **Confirmation Screen:** Shows the selected slot, doctor's details, and the **AI-generated summary**. The patient confirms.
        7.  An entry is created in the `appointments` table with `status` set to `pending`.

### 1.4. Managing Appointments
-   **Page: Patient Dashboard**
    -   **UI:** Lists upcoming and past appointments. Real-time updates (using Supabase subscriptions) will change status from `pending` to `confirmed` or `rejected`.
    -   **AI Feature (Reminders/Rescheduling):**
        -   An upcoming appointment card has a "Reschedule" button.
        -   Clicking it could trigger a pre-drafted message generated by Gemini: `"I would like to request a reschedule for my appointment with Dr. Smith, originally on [Date] at [Time]."`

---

## 2. Doctor Journey

### 2.1. Onboarding & Profile Setup
-   **Flow:** Doctors are onboarded by an admin. Their `role` in the `profiles` table is set to `doctor`. They receive a login link.
-   **Page: Profile Setup**
    -   **UI:** A form to fill in their `specialty`, `experience`, `qualifications`, and upload a profile picture to Supabase Storage.

### 2.2. Managing Availability
-   **Page: Doctor Dashboard / Calendar**
    -   **UI:** A calendar interface. Doctors can click on dates/time ranges to set their availability.
    -   **Flow:** This creates/updates records in the `availability` table. The UI should prevent setting availability in the past.

### 2.3. Managing Appointments
-   **Page: Appointment Requests**
    -   **UI:** A list of incoming appointment requests (`status = 'pending'`).
    -   **Display:** Each request shows: Patient Name, Requested Slot, and the **AI-Generated Summary** of their concerns. This allows the doctor to quickly triage and understand the patient's needs.
    -   **Actions:** "Approve" and "Reject" buttons.
        -   **Approve:** Updates the appointment `status` to `confirmed`. A Supabase Function or webhook could trigger a confirmation email to the patient.
        -   **Reject:** Updates `status` to `rejected`.

---

## 3. General AI-Powered Features

### 3.1. Natural Language Query
-   **Location:** Can be integrated into the main search bar or a dedicated chat interface.
-   **Flow:**
    1.  User asks: **"Find me a dermatologist near me available this weekend."**
    2.  The query is sent to a Gemini function capable of entity extraction.
    3.  The function should identify:
        -   **Specialty:** "dermatologist"
        -   **Timeframe:** "this weekend" (which the backend translates to specific dates)
        -   **Location:** "near me" (requires browser location access)
    4.  The backend then constructs a Supabase query based on these extracted entities and returns the relevant doctors.

### 3.2. Auto Chat Replies
-   **Location:** A small chat bubble on the site.
-   **Flow:**
    1.  Patient asks: **"What's the earliest available time for a gynecologist?"**
    2.  The query is parsed for **specialty** ("gynecologist") and **intent** ("earliest available").
    3.  The backend queries the `availability` and `appointments` tables to find the first open slot for any doctor in that specialty.
    4.  Gemini formats the response: "The earliest available appointment with a Gynecologist is with Dr. Emily Carter at 2:00 PM on August 5th."
